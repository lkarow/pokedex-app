let pokemonRepository=function(){let e=[],t="https://pokeapi.co/api/v2/pokemon/?limit=151";function n(t){"object"==typeof t&&"name"in t&&"detailsUrl"in t?e.push(t):console.log("Error!")}function o(t){return e.filter(function(e){return e.name===t})}function i(){let e=o(document.getElementById("input-pokemon").value.toLowerCase());l(),c(e[0])}function l(){let e=document.getElementsByTagName("li");for(;e.length>0;)e[0].remove()}document.getElementById("button-search-pokemon").addEventListener("click",e=>{e.preventDefault(),i()});let a=document.getElementById("input-pokemon");a.addEventListener("keydown",e=>{"Enter"===e.key&&(e.preventDefault(),i())});let r=document.getElementById("autocomplete");function c(e){let t=e.name,n=e.name.charAt(0).toUpperCase()+t.slice(1),o=document.querySelector(".pokemon-list"),i=document.createElement("li");i.classList.add("group-list-item","col-sm-12","col-md-6","col-lg-4","p-2");let l=document.createElement("button");l.innerText=n,l.classList.add("btn","btn-outline-primary","btn-block","button-pokemon"),l.setAttribute("data-toggle","modal"),l.setAttribute("data-target","#modal-container"),i.appendChild(l),o.appendChild(i),function(e,t){e.addEventListener("click",function(){d(t)})}(l,e)}function s(e){let t=e.detailsUrl;return fetch(t).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.sprites.other["official-artwork"].front_default,e.height=t.height,e.weight=t.weight,e.types=t.types,e.base_experience=t.base_experience}).catch(function(e){console.error(e)})}function d(e){s(e).then(function(){!function(e){let t=e.name,n=e.name.charAt(0).toUpperCase()+t.slice(1),o=[];for(let t=0;t<e.types.length;t++)o.push(e.types[t].type.name);let i=$(".modal-title"),l=$(".modal-body");i.empty(),l.empty();let a=document.createElement("h2");a.innerText=n;let r=document.createElement("IMG");r.classList.add("modal-image"),r.src=e.imageUrl,r.setAttribute("alt","Picture of Pokemon");let c=document.createElement("p");c.innerText=`Height: ${e.height/10} m`;let s=document.createElement("p");s.innerText=`Weight: ${e.weight/10} kg`;let d=document.createElement("p");d.innerText=`Types: ${o.join(", ")}`;let p=document.createElement("p");p.innerText=`Base experience: ${e.base_experience}`,i.append(a),l.append(r),l.append(c),l.append(s),l.append(d),l.append(p)}(e)})}return a.addEventListener("input",t=>{let n=t.target.value.toLowerCase();if(""===n)r.style.display="none";else{let t=e.filter(e=>e.name.includes(n));if(t.length>0){r.style.display="block",r.innerHTML="";for(let e=0;e<t.length;e++){let n=document.createElement("p");n.classList.add("suggestions"),n.addEventListener("click",()=>{a.value=t[e].name.charAt(0).toUpperCase()+t[e].name.slice(1),i()}),n.innerText=t[e].name.charAt(0).toUpperCase()+t[e].name.slice(1),r.appendChild(n)}}else r.style.display="none"}}),document.addEventListener("click",()=>{r.style.display="none"}),a.addEventListener("keydown",e=>{"Escape"===e.key&&(r.innerHTML="",r.style.display="none")}),document.getElementById("button-reset-pokemon").addEventListener("click",e=>{e.preventDefault(),l(),pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})}),{getAll:function(){return e},add:n,find:o,addListItem:c,loadList:function(){return fetch(t).then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){n({name:e.name,detailsUrl:e.url})})}).catch(function(e){console.error(e)})},loadDetails:s,showDetails:d}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});