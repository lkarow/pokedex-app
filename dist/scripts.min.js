let pokemonRepository=(()=>{let e=[],t="https://pokeapi.co/api/v2/pokemon/?limit=151";function n(t){"object"==typeof t&&"name"in t&&"detailsUrl"in t?e.push(t):console.log("Error!")}function o(t){return e.filter(e=>e.name===t)}function l(){let e=o(document.getElementById("input-pokemon").value.toLowerCase());a(),s(e[0])}function a(){let e=document.getElementsByTagName("li");for(;e.length>0;)e[0].remove()}document.getElementById("button-search-pokemon").addEventListener("click",e=>{e.preventDefault(),l()});let i=document.getElementById("input-pokemon");i.addEventListener("keydown",e=>{"Enter"===e.key&&(e.preventDefault(),l())});let r=document.getElementById("autocomplete");function s(e){const{name:t}=e;let n=`${t.charAt(0).toUpperCase()}${t.slice(1)}`,o=document.querySelector(".pokemon-list"),l=document.createElement("li");l.classList.add("group-list-item","col-sm-12","col-md-6","col-lg-4","p-2");let a=document.createElement("button");a.innerText=n,a.classList.add("btn","btn-outline-primary","btn-block","button-pokemon"),a.setAttribute("data-toggle","modal"),a.setAttribute("data-target","#modal-container"),l.appendChild(a),o.appendChild(l),function(e,t){e.addEventListener("click",()=>d(t))}(a,e)}function c(e){let t=e.detailsUrl;return fetch(t).then(e=>e.json()).then(t=>{e.imageUrl=t.sprites.other["official-artwork"].front_default,e.height=t.height,e.weight=t.weight,e.types=t.types,e.base_experience=t.base_experience}).catch(e=>console.error(e))}function d(e){c(e).then(()=>(function(e){let t=e.name,n=e.name.charAt(0).toUpperCase()+t.slice(1),o=[];for(let t=0;t<e.types.length;t++)o.push(e.types[t].type.name);let l=$(".modal-title"),a=$(".modal-body");l.empty(),a.empty();let i=document.createElement("h2");i.innerText=n;let r=document.createElement("IMG");r.classList.add("modal-image"),r.src=e.imageUrl,r.setAttribute("alt","Picture of Pokemon");let s=document.createElement("p");s.innerText=`Height: ${e.height/10} m`;let c=document.createElement("p");c.innerText=`Weight: ${e.weight/10} kg`;let d=document.createElement("p");d.innerText=`Types: ${o.join(", ")}`;let p=document.createElement("p");p.innerText=`Base experience: ${e.base_experience}`,l.append(i),a.append(r),a.append(s),a.append(c),a.append(d),a.append(p)})(e))}return i.addEventListener("input",t=>{let n=t.target.value.toLowerCase();if(""===n)r.style.display="none";else{let t=e.filter(e=>e.name.includes(n));t.length>0?(r.style.display="block",r.innerHTML="",t.forEach(e=>{let t=document.createElement("p");t.classList.add("suggestions");const{name:n}=e;t.addEventListener("click",()=>{i.value=`${n.charAt(0).toUpperCase()}${n.slice(1)}`,l()}),t.innerText=n.charAt(0).toUpperCase()+n.slice(1),r.appendChild(t)})):r.style.display="none"}}),document.addEventListener("click",()=>{r.style.display="none"}),i.addEventListener("keydown",e=>{"Escape"===e.key&&(r.innerHTML="",r.style.display="none")}),document.getElementById("button-reset-pokemon").addEventListener("click",e=>{e.preventDefault(),a(),pokemonRepository.getAll().forEach(e=>pokemonRepository.addListItem(e)),i.value=""}),{getAll:function(){return e},add:n,find:o,addListItem:s,loadList:function(){return fetch(t).then(e=>e.json()).then(e=>{e.results.forEach(e=>{n({name:e.name,detailsUrl:e.url})})}).catch(e=>console.error(e))},loadDetails:c,showDetails:d}})();pokemonRepository.loadList().then(()=>{pokemonRepository.getAll().forEach(e=>pokemonRepository.addListItem(e))});